
InputObject                                                         
-----------                                                         
    get rootFolder() {                                              
        return this.cloudRootFolder;                                
        // Handle invalid concurrency (e.g. -1 for disabled) to a...
        const workerCount = Math.max(0, Math.min(concurrency, que...
        if (workerCount === 0)                                      
            return [];                                              
        const workers = Array(workerCount)                          
        // 1. Ribbon Icon                                           
    onunload() {                                                    
        if (this.autoSyncInterval) {                                
            window.clearInterval(this.autoSyncInterval);            
            this.adapter.updateConfig(credentials.clientId || "",...
        // MIGRATION: Check if legacy credentials exist in data.j...
        // Ensure data dir exists                                   
        const dataDir = `${this.manifest.dir}/${DATA_REMOTE_DIR}`;  
        if (!(await this.app.vault.adapter.exists(dataDir))) {      
            await this.app.vault.createFolder(dataDir).catch(() =...
        // Save to data.json in new layout                          
        const dataPath = `${dataDir}/data.json`;                    
        await this.app.vault.adapter.write(dataPath, JSON.stringi...
        // For compatibility with VaultSync mobile/other versions...
        await this.saveData(this.settings);                         
        // Also update live adapter config                          
        this.adapter.updateConfig(clientId, clientSecret, this.ap...
            // Note: .sync-state migration handled/accessed by Se...
            // but we can move it here if it exists in old standa...
            .addButton((button) => button.setButtonText(t("settin...
            const isAuthed = await this.plugin.adapter.isAuthenti...
            if (isAuthed) {                                         
                new obsidian.Notice(t("noticeAuthSuccess"));        
                new obsidian.Notice(t("noticeAuthFailed"));         
            this.plugin.adapter.updateConfig(value, this.plugin.a...
            this.plugin.adapter.updateConfig(this.plugin.adapter....
            .addButton((button) => button                           
            .setButtonText(t("settingLogin"))                       
            .setCta()                                               
            .onClick(async () => {                                  
        // Mobile/Manual Auth                                       
                .setName(t("settingAuthorize"))                     
                text.setPlaceholder(t("settingManualAuthPlacehold...
                text.inputEl.style.width = "100%";                  
                .addButton((button) => button.setButtonText(t("se...
                const val = textComponent.getValue().trim();        
                if (!val)                                           
                    return;                                         
                let code = val;                                     
                // Extract code from URL if full URL is pasted      
                if (val.includes("code=")) {                        
                        const url = new window.URL(val);            
                        code = url.searchParams.get("code") || val; 
                        // ignore                                   
                }                                                   
                try {                                               
                    await this.plugin.adapter.exchangeCodeForToke...
                    const tokens = this.plugin.adapter.getTokens(); 
                    await this.plugin.saveCredentials(this.plugin...
                    await this.plugin.syncManager.notify(t("notic...
                    this.display();                                 
                }                                                   
                catch (e) {                                         
                    await this.plugin.syncManager.notify(`${t("no...
                }                                                   
            }))                                                     
            // Sanitize input                                       
            // Basic validation to prevent invalid paths            
                // Revert if invalid (optional: show error)         
                // For now, if empty, default. If invalid, maybe ...
                // But following old logic, if empty use default.   
                if (!sanitized) {                                   
                    this.plugin.settings.cloudRootFolder = "Obsid...
                    await this.plugin.saveSettings();               
                }                                                   
            this.plugin.settings.cloudRootFolder = sanitized;       
            // Also update live adapter                             
            this.plugin.adapter.updateConfig(this.plugin.adapter....
        // 5. Exclusion                                             
                .setPlaceholder(".git\nnode_modules\n*.tmp")        
                // Trigger cleanup on next sync                     
        // 6. Developer                                             
                .setPlaceholder("10")                               
    }                                                               
    }                                                               
                return;                                             
                                                                    
                                                                    
//# sourceMappingURL=data:application/json;charset=utf-8;base64,e...
        const workers = Array(Math.min(concurrency, queue.length))  
        // MIGRATION: Check if legacy credentials exist in data.j...
            delete settingsAny["refreshToken"];                     
        const dataPath = `${this.manifest.dir}/${DATA_REMOTE_DIR}...
            // Ensure directory exists                              
            const dir = `${this.manifest.dir}/${DATA_REMOTE_DIR}`;  
                await this.app.vault.createFolder(dir);             
            await this.app.vault.adapter.write(dataPath, JSON.str...
        catch (e) {                                                 
            console.error("VaultSync: Failed to save settings", e); 
            // Note: .sync-state migration handled/accessed by Se...
            // but we can move it here if it exists in old standa...
            // SecureStorage handles its own path logic, but let'...
            if (!(await this.app.vault.adapter.exists(dir))) {      
                    // Or read/write/delete                         
        try {                                                       
            .addButton((button) => button.setButtonText(t("settin...
            this.plugin.adapter.updateConfig(value, this.plugin.a...
            // Update adapter temporarily                           
            this.plugin.adapter.updateConfig(this.plugin.adapter....
            // Persist securely                                     
            .addButton((button) => button.setButtonText(t("settin...
            // Manual Auth (Mobile Fallback)                        
                text.setPlaceholder(t("settingManualAuthPlacehold...
                    "100%";                                         
                .addButton((btn) => {                               
                btn.setButtonText(t("settingManualAuthVerify")).o...
                    const val = textComponent.getValue().trim();    
                    if (!val)                                       
                        return;                                     
                    let code = val;                                 
                    if (val.includes("code=")) {                    
                        try {                                       
                            const url = new window.URL(val);        
                            code = url.searchParams.get("code") |...
                        }                                           
                        catch (e) {                                 
                            // ignore                               
                        }                                           
                        await this.plugin.adapter.exchangeCodeFor...
                        const tokens = this.plugin.adapter.getTok...
                        await this.plugin.saveCredentials(this.pl...
                        await this.plugin.syncManager.notify(t("n...
                        this.display();                             
                        await this.plugin.syncManager.notify(`${t...
                    }                                               
                });                                                 
            })                                                      
            this.display();                                         
            // Validation: empty or invalid -> default              
                this.plugin.settings.cloudRootFolder = "ObsidianV...
                this.plugin.settings.cloudRootFolder = sanitized;   
            this.plugin.adapter.updateConfig(this.plugin.adapter....
        // 5. Exclusion Patterns                                    
                .setPlaceholder("*.tmp\ntemp/**\n.git/**")          
        // 6. Developer (Hidden by default, enable via data.json:...
//# sourceMappingURL=data:application/json;charset=utf-8;base64,e...


